

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>cdm.mapper.mapper &mdash; cdm-mapper v1.3 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> cdm-mapper
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../tool-set-up.html">Tool set up</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tool-set-up.html#clone-the-repository">1. Clone the repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tool-set-up.html#install-a-python-environment">2. Install a python environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tool-set-up.html#install-dependencies">3. Install dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tool-set-up.html#install-mdf-reader-toolbox">4. Install <code class="docutils literal notranslate"><span class="pre">mdf_reader</span></code> toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tool-set-up.html#optional-step-install-jupyter-notebooks">5. Optional step: install jupyter notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting-started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting-started.html#test-the-tool">1. Test the tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting-started.html#read-a-sample-imma">2. Read a sample <code class="docutils literal notranslate"><span class="pre">.imma</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting-started.html#map-this-data-to-a-cdm-build-for-the-same-deck">3. Map this data to a CDM build for the same deck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting-started.html#write-the-output">4. Write the output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to-register-a-new-data-model-mapping.html">How to register a new data model mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cdm-tables-mapping-files-and-descriptors.html">CDM tables mapping files and descriptors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../cdm-tables-mapping-files-and-descriptors.html#descriptors">Descriptors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../cdm-tables-mapping-files-and-descriptors.html#mapping-sequence">Mapping sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../cdm-tables-mapping-files-and-descriptors.html#defining-mapping-functions">Defining mapping functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../cdm-tables-mapping-files-and-descriptors.html#code-tables">Code tables</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm</span></code></a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../../common/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.common</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../gridded_stats/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.gridded_stats</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../lib/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.lib</span></code></a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.mapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../table_reader/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.table_reader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../table_writer/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.table_writer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../properties/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.properties</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../index.html#package-contents">Package Contents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../index.html#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">cdm-mapper</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.mapper.mapper</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/autoapi/cdm/mapper/mapper/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-cdm.mapper.mapper">
<span id="cdm-mapper-mapper"></span><h1><a class="reference internal" href="#module-cdm.mapper.mapper" title="cdm.mapper.mapper"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cdm.mapper.mapper</span></code></a><a class="headerlink" href="#module-cdm.mapper.mapper" title="Permalink to this headline">¶</a></h1>
<p>Created on Thu Apr 11 13:45:38 2019</p>
<p>Maps data contained in a pandas DataFrame (or pd.io.parsers.TextFileReader) to
the C3S Climate Data Store Common Data Model (CDM) header and observational
tables using the mapping information available in the tool’s mapping library
for the input data model.</p>
<p>&#64;author: iregon</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#cdm.mapper.mapper._map" title="cdm.mapper.mapper._map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_map</span></code></a>(imodel, data, data_atts, cdm_subset=None, log_level='INFO')</p></td>
<td><p>Maps a pandas DataFrame (or pd.io.parsers.TextFileReader) to the C3S Climate Data Store Common Data Model (CDM)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#cdm.mapper.mapper.map_model" title="cdm.mapper.mapper.map_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">map_model</span></code></a>(imodel, data, data_atts, cdm_subset=None, log_level='INFO')</p></td>
<td><p>Calls the main mapping function _map()</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#cdm.mapper.mapper.module_path" title="cdm.mapper.mapper.module_path"><code class="xref py py-obj docutils literal notranslate"><span class="pre">module_path</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py data">
<dt id="cdm.mapper.mapper.module_path">
<code class="sig-name descname"><span class="pre">module_path</span></code><a class="reference internal" href="../../../../_modules/cdm/mapper/mapper.html#module_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cdm.mapper.mapper.module_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="cdm.mapper.mapper._map">
<code class="sig-name descname"><span class="pre">_map</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imodel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_atts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdm_subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/cdm/mapper/mapper.html#_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cdm.mapper.mapper._map" title="Permalink to this definition">¶</a></dt>
<dd><p>Maps a pandas DataFrame (or pd.io.parsers.TextFileReader) to the C3S Climate Data Store Common Data Model (CDM)
header and observational tables using mapping information from the input data model (imodel).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imodel</strong> (<em>a data model that can be</em>) – <ol class="arabic simple">
<li><p>A generic mapping from a defined data model, like IMMA1’s core and attachments
e.g. <code class="docutils literal notranslate"><span class="pre">~/cdm-mapper/lib/mappings/icoads_r3000</span></code></p></li>
<li><p>A specific mapping from generic data model to CDM, like map a SID-DCK from IMMA1’s core and attachments
to CDM in a specific way. e.g. <code class="docutils literal notranslate"><span class="pre">~/cdm-mapper/lib/mappings/icoads_r3000_d704</span></code></p></li>
</ol>
</p></li>
<li><p><strong>data</strong> (<em>input data to map</em>) – e.g. a pandas.Dataframe or io.parsers.TextFileReader objects or in-memory text streams (io.StringIO object).</p></li>
<li><p><strong>data_atts</strong> – dictionary with the {element_name:element_attributes} of the data. Type: string.</p></li>
<li><p><strong>cdm_subset</strong> (<em>subset of CDM model tables to map.</em>) – Defaults to the full set of CDM tables defined for the imodel. Type: list.</p></li>
<li><p><strong>log_level</strong> (<em>level of logging information to save.</em>) – Defaults to ‘DEBUG’. Type: string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>cdm_tables</strong> (a python dictionary with the <code class="docutils literal notranslate"><span class="pre">cdm_table_name</span></code> and <code class="docutils literal notranslate"><span class="pre">cdm_table_object</span></code> pairs.)</p></li>
<li><p><strong>cdm_table_name</strong> (is the name of the CDM table i.e. <code class="docutils literal notranslate"><span class="pre">header</span></code>, <code class="docutils literal notranslate"><span class="pre">observations_at</span></code>, etc.)</p></li>
<li><p><strong>cdm_table_object</strong> (is the python dictionary with the <code class="docutils literal notranslate"><span class="pre">{data:cdm_table_object,</span> <span class="pre">atts:cdm_table_atts}</span></code> pairs.)</p></li>
<li><p><strong>1. cdm_table_object</strong> (<em>is a python pandas DataFrame object with the CDM elements aligned in columns according</em>)</p></li>
<li><p><em>to the order established by the imodel.</em></p></li>
<li><p><strong>2. cdm_table_atts</strong> (<em>python dictionary with the CDM element attributes. These element attributes can be the</em>)</p></li>
<li><p><em>elements encoding, decimal places or other characteristics specified in the imodel.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cdm.mapper.mapper.map_model">
<code class="sig-name descname"><span class="pre">map_model</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imodel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_atts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdm_subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/cdm/mapper/mapper.html#map_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cdm.mapper.mapper.map_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the main mapping function _map()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imodel</strong> (<em>a data model that can be of several types.</em>) – <p>1. A generic mapping from a defined data model, like IMMA1’s core and attachments.
e.g. <code class="docutils literal notranslate"><span class="pre">~/cdm-mapper/lib/mappings/icoads_r3000</span></code></p>
<p>2. A specific mapping from generic data model to CDM, like map a SID-DCK from IMMA1’s core and attachments to
CDM in a specific way.</p>
<blockquote>
<div><p>e.g. <code class="docutils literal notranslate"><span class="pre">~/cdm-mapper/lib/mappings/icoads_r3000_d704</span></code></p>
</div></blockquote>
</p></li>
<li><p><strong>data</strong> (<em>input data to map.</em>) – e.g. a <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code> or <code class="docutils literal notranslate"><span class="pre">io.parsers.TextFileReader</span></code> objects or in-memory text streams
(io.StringIO object).</p></li>
<li><p><strong>data_atts</strong> (<em>dictionary with the {element_name:element_attributes} of the data.</em>) – Type: string.</p></li>
<li><p><strong>cdm_subset</strong> (<em>subset of CDM model tables to map.</em>) – Defaults to the full set of CDM tables defined for the imodel. Type: list.</p></li>
<li><p><strong>log_level</strong> (<em>level of logging information to save.</em>) – Defaults to ‘DEBUG’.
Type string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>cdm_tables</em> – a python dictionary with the <code class="docutils literal notranslate"><span class="pre">{cdm_table_name:</span> <span class="pre">cdm_table_object}</span></code> pairs.</p></li>
<li><p><em>For more information look at the _map function.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, David Berry, Irene Perez Gonzalez and Beatriz Recinos.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>